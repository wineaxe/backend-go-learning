package main

import (
	"fmt"
	"os"         // для работы с аргументами командной строки
	"path/filepath" // для работы с путями файлов
	"time"       // для парсинга времени
)

func main() {

	var myTime string // переменная для хранения строки с временем

	// Проверка количества аргументов командной строки
	// os.Args[0] — имя программы, os.Args[1] — первый аргумент, и т.д.
	// len(os.Args) != 2 означает: если аргументов не ровно 2 (программа + 1 аргумент)
	if len(os.Args) != 2 {

		// filepath.Base(os.Args[0]) — получаем только имя файла программы (без пути)
		// Выводим сообщение об использовании программы
		fmt.Printf("using: %s string\n", filepath.Base(os.Args[0]))
		// Пример вывода: "using: main.exe string" или "using: 14parseTime string"

		os.Exit(1) // завершаем программу с кодом ошибки 1
	}

	// Получаем первый аргумент командной строки (строку с временем)
	myTime = os.Args[1]

	// time.Parse() — парсит строку в формат time.Time
	// Первый параметр — шаблон формата: "15:04"
	//   - 15 — часы в 24-часовом формате (00-23)
	//   - 04 — минуты (00-59)
	// Второй параметр — строка для парсинга (например: "14:30")
	// Возвращает два значения: time.Time и error
	d, err := time.Parse("15:04", myTime)

	// Проверяем, была ли ошибка парсинга
	if err == nil {

		// Если ошибки нет, выводим результат
		fmt.Println("Full:", d) // полное время (например: 0000-01-01 14:30:00 +0000 UTC)
		// Примечание: дата будет нулевой (0000-01-01), так как мы парсим только время

		// Извлекаем часы и минуты из распарсенного времени
		fmt.Println("Time:", d.Hour(), d.Minute()) // например: Time: 14 30

	} else {

		// Если была ошибка парсинга, выводим её
		fmt.Println(err)
		// Пример ошибки: "parsing time \"abc\" as \"15:04\": cannot parse \"abc\" as \"15:04\""
	}
}

// Пример использования программы:
// go run main.go 14:30
// Вывод:
//   Full: 0000-01-01 14:30:00 +0000 UTC
//   Time: 14 30
//
// go run main.go abc
// Вывод:
//   parsing time "abc" as "15:04": cannot parse "abc" as "15:04"
//
// go run main.go
// Вывод:
//   using: main.exe string