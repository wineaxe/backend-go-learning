package main

import (
	"fmt"
)

// getPointer принимает указатель на int и изменяет значение по этому указателю
// *int означает "указатель на int"
func getPointer(n *int) {

	// *n — разыменование указателя (получение значения, на которое указывает n)
	// *n * *n — умножение значения на само себя (возведение в квадрат)
	// *n = ... — присваивание значения переменной, на которую указывает n
	*n = *n * *n
	// После вызова функции значение переменной, переданной по указателю, изменится
}

// returnPointer принимает int и возвращает указатель на int
func returnPointer(n int) *int {

	v := n * n // вычисляем квадрат числа

	// &v — получаем адрес переменной v (возвращаем указатель на v)
	// Важно: v — локальная переменная, но Go автоматически перемещает её в кучу (heap),
	// если возвращается указатель на неё, поэтому это безопасно
	return &v
}

func main() {

	i := -10 // обычная переменная типа int

	j := 25 // обычная переменная типа int

	// &i — оператор получения адреса (address-of operator)
	// pI теперь содержит адрес переменной i (указатель на i)
	pI := &i

	pJ := &j // pJ содержит адрес переменной j

	fmt.Println("pI memmory:", pI) // выводит адрес памяти, где хранится i (например: 0xc0000140a8)

	fmt.Println("pI memmory:", pJ) // выводит адрес памяти, где хранится j (например: 0xc0000140b0)
	// Примечание: здесь опечатка в комментарии — должно быть "pJ memory"

	fmt.Println("pI value:", pI) // выводит адрес (то же самое, что выше)

	fmt.Println("pI value:", pJ) // выводит адрес j (опечатка в комментарии — должно быть "pJ value")

	// *pI — разыменование указателя (получение значения, на которое указывает pI)
	// *pI = 123456 — изменяем значение переменной i через указатель
	*pI = 123456

	// *pI-- — уменьшаем значение переменной i на 1 через указатель
	*pI--

	fmt.Println("i:", i) // 123455 (значение i изменилось через указатель)

	// Передаём указатель pJ в функцию getPointer
	// Функция изменит значение j через указатель (возведёт в квадрат)
	getPointer(pJ)

	fmt.Println("j:", j) // 625 (25 * 25 = 625) — значение j изменилось в функции

	// returnPointer возвращает указатель на локальную переменную
	k := returnPointer(12) // k — указатель на результат (12 * 12 = 144)

	fmt.Println(*k) // 144 — разыменование указателя k (получаем значение)

	fmt.Println(k) // выводит адрес памяти, где хранится значение (например: 0xc0000140c0)
}
